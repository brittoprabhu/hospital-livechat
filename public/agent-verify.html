<!doctype html>
<html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Verify Email</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gray-50 flex items-center justify-center">
  <main class="w-full max-w-md bg-white border border-gray-200 rounded-xl shadow p-6">
    <h1 class="text-lg font-semibold mb-2">Verify Email</h1>
    <p class="text-sm text-gray-600 mb-4">Final step before admin approval.</p>
    <p id="msg" class="text-sm">Verifyingâ€¦</p>
  </main>
  <script>
    (async ()=>{
      const params = new URLSearchParams(location.search);
      const token = params.get('token');
      const msg = document.getElementById('msg');
      try{
        const res = await fetch('/api/agents/verify-email', {
          method:'POST', headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ token })
        });
        const j = await res.json();
        if(!res.ok || j.error){ msg.textContent=j.error||'Verification failed'; msg.className='text-sm text-red-600'; return; }
        msg.textContent = j.message || 'Email verified. Await admin approval.';
        msg.className='text-sm text-emerald-700';
      }catch(e){ msg.textContent='Network error'; msg.className='text-sm text-red-600';}
    })();
  </script>
</body></html>
